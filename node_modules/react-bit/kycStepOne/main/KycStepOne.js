/*

  Page name:  Identity Document

  */
import React from 'react'
import { Range } from '../../../elements/index'
import { Card } from '../../../hocs'
import { appConst } from '../../../constants/texts'
import './KycStepOne.css'
import KycNextButton from '../../kycNextButton/KycNextButton'
import Country from '../country/Country'
import { DocType } from '../docType'
import { useDispatch, useSelector } from 'react-redux'
import { sendKycDocs, setShowClassName } from '../../../redux/actions/Actions'
const KycStepOne = (props) => {
  const {
    handleClick = () => { }
  } = {
    ...props
  }
  const state =useSelector(state=>state.common);
  const dispatch = useDispatch();
  const {
    imgType,
    uploadedImages,
    kycID , 
    uploadedImagesID 
  }={...state};
  const handleNext = () => {
    if(imgType &&  uploadedImages.front && uploadedImages.back ){
      dispatch(sendKycDocs({
          frontId: uploadedImagesID.front,
          backId:  uploadedImagesID.back,
          docType: imgType ||  sessionStorage.getItem('docType') , 
          kycId:   sessionStorage.getItem('kycid')

      }))
     handleClick(2);
    }
    else{
       
      dispatch(setShowClassName(true));
    }
  };
  return (
    <div className='stepone-body' >
      <Range />
      <Card bodyCls={'stepone-body-card'} >
        <p className='title'>
          {appConst.id_doc}
        </p>
        <Country />
        <DocType />
        <div className="center-button">
          <KycNextButton handleClick={handleNext} />
        </div>
      </Card>
    </div>
  )
}

export default KycStepOne